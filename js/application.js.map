{"version":3,"sources":["application.js"],"names":["val","id","$id","touch","enable","config","Reveal","getConfig","removeEventListeners","addEventListeners","getScale","element","$","zoom","parseFloat","css","matches","transform","match","isNaN","scaleForms","removeClass","scale","isArray","onYouTubeIframeAPIReady","currentSlide","each","index","slide","data","videoId","div","append","players","player","isReady","play","this","playVideo","_this","timer","setInterval","clearInterval","pause","pauseVideo","YT","Player","width","height","playerVars","fs","origin","window","location","protocol","hostname","events","onReady","addClass","onStateChange","event","PlayerState","PLAYING","ga","find","text","ENDED","next","cookie","escapeHtml","string","String","replace","s","entityMap","escapeRegExp","shuffleArray","array","i","length","j","Math","floor","random","temp","showWord","timelineWordsArray","words","word","timeline","pos","html","outerWidth","hide","fadeIn","on","is","draggable","clone","dragListener","time","_time","ui","item","dropListener","x","parseInt","y","replaceWith","setTimeout","left","top","currentWord","initializeCanvas","canvas","fabric","Canvas","isDrawingMode","getWidth","getHeight","Image","fromURL","img","set","clipTo","ctx","w","h","r","beginPath","moveTo","arcTo","closePath","add","sendToBack","Rect","fill","strokeWidth","stroke","rx","ry","opacity","windowIsLoaded","addDetailsToCanvas","load","show","repeat","str","chr","Array","join","tokens","nameOnCertificate","toUpperCase","split","lines","lineLimit","lineText","push","addUnderline","styles","0","_tokens","_i","textDecoration","_text","IText","fontFamily","fontSize","centerH","Text","format","date","now","Line","document","getElementById","body","style","initialize","controls","progress","transition","backgroundTransition","margin","minScale","maxScale","history","center","addEventListener","previousSlide","popup","remove","clear","attr","selectric","iCheck","checkboxClass","value","toLowerCase","&","<",">","\"","'","/","schoolname","schoolnames","stopPropagation","name","target","has","debounce","keyword","schoolnamesArray","foundValues","pattern","RegExp","test","prop","end","parents","fields","serializeArray","isOnError","error","inArray","ajax","type","url","crossDomain","done","expires","droppable","accept","receiveHandler","noop","prev","getPointer","upperCanvasEl","srcElement","unknown","scroll","util","getScrollLeftTop","pointerX","pointerY","_getPointer","pageProp","clientProp","touchProp","clientX","clientY","isTouchSupported","prototype","e","ignoreZoom","cssScale","pointer","bounds","getBoundingClientRect","boundsWidth","boundsHeight","abs","bottom","right","calcOffset","_offset","transformPoint","invertTransform","viewportTransform","_renderCharDecoration","styleDeclaration","offset","charWidth","charHeight","indexOf","fillRect","_fontSizeFraction","_fontSizeMult","navigator","userAgent","appVersion","open","write","toDataURL","toBlob","blob","saveAs"],"mappings":"AAKA,QAASA,KAAIC,GACX,MAAOC,KAAID,GAAID,MAgCjB,QAASG,OAAMC,GACbA,EAAqB,OAAXA,KAAqBA,CAE/B,IAAIC,GAASC,OAAOC,WACpBF,GAAOF,MAAQC,EAEfE,OAAOE,uBACPF,OAAOG,oBAGT,QAASC,YACP,GAAIC,GAAUC,EAAE,cACZC,EAAOC,WAAWH,EAAQI,IAAI,SAC9BC,EAAUL,EAAQI,IAAIE,WAAWC,MAAM,uGAM3C,QAJIC,MAAMN,IAAqB,OAAZG,KACjBH,GAAQG,EAAQ,GAAIA,EAAQ,KAGvBH,EAGT,QAASO,cACP,GAAIT,GAAUC,EAAE,kCAAkCS,YAAY,UAC1DC,EAAQZ,UAERE,GAAEW,QAAQD,GACZX,EAAQI,IAAIE,UAAW,gCAAkCK,EAAM,GAAK,YAAcA,EAAM,GAAK,KAE7FX,EACGI,IAAIE,UAAW,yBACfF,IAAI,OAAQO,GAInB,QAASE,2BACP,GAAIC,GAAeb,EAAE,+BAErBA,GAAE,wBAAwBc,KAAK,SAASC,EAAOC,GAC7C,GAAIhB,EAAEgB,GAAOC,KAAK,YAAa,CAC7B,GAAIC,GAAUlB,EAAEgB,GAAOC,KAAK,YACxBE,EAAMnB,EAAE,kBAAoBkB,EAAU,KAC1ClB,GAAE,4BAA8Be,EAAQ,KAAKK,OAAOD,GAEpDE,QAAQH,IACNI,OAAQ,KACRC,SAAS,EACTC,KAAM,WACJ,GAAIC,KAAKF,QACPE,KAAKH,OAAOI,gBAEZ,IAAIC,GAAQF,KAERG,EAAQC,YAAY,WAClBF,EAAMJ,UACRI,EAAML,OAAOI,YACbI,cAAcF,KAEf,MAGPG,MAAO,WACDN,KAAKF,SACPE,KAAKH,OAAOU,eAKlBX,QAAQH,GAASI,OAAS,GAAIW,IAAGC,OAAO,SAAWhB,GACjDiB,MAAO,OACPC,OAAQ,OACRlB,QAASA,EACTmB,YACEC,GAAI,EACJC,OAAQC,OAAOC,SAASC,SAAW,KAAOF,OAAOC,SAASE,UAE5DC,QACEC,QAAW,WACTxB,QAAQH,GAASK,SAAU,EAC3BjC,IAAI,SAAW4B,GAAS4B,SAAS,UAEnCC,cAAiB,SAASC,GACpBA,EAAM/B,MAAQgB,GAAGgB,YAAYC,SAE/BC,GAAG,OAAQ,QAAS,QAAS,OAAQnD,EAAE,gCAAgCoD,KAAK,MAAMC,QAGhFL,EAAM/B,MAAQgB,GAAGgB,YAAYK,OAC/B5D,OAAO6D,cAQf1C,GAAgBA,EAAaI,KAAK,aAA+C,MAAhCjB,EAAEwD,OAAO,oBAC5DnC,QAAQR,EAAaI,KAAK,aAAaO,OAkG3C,QAASiC,YAAWC,GAClB,MAAOC,QAAOD,GAAQE,QAAQ,aAAc,SAAUC,GACpD,MAAOC,WAAUD,KA4BrB,QAASE,cAAaL,GACpB,MAAOA,GAAOE,QAAQ,sBAAuB,QAyH/C,QAASI,cAAaC,GACpB,IAAK,GAAIC,GAAID,EAAME,OAAS,EAAGD,EAAI,EAAGA,IAAK,CACzC,GAAIE,GAAIC,KAAKC,MAAMD,KAAKE,UAAYL,EAAI,IACpCM,EAAOP,EAAMC,EACjBD,GAAMC,GAAKD,EAAMG,GACjBH,EAAMG,GAAKI,EAGb,MAAOP,GAKT,QAASQ,UAAS1D,GAChB,GAAIA,EAAQyB,OAAOkC,mBAAmBP,OAAQ,CAC5C,GAAIlD,GAAOuB,OAAOkC,mBAAmB3D,GACjC4D,EAAQ1D,EAAK0D,MAAMf,QAAQ,MAAO,QAElCgB,EAAO5E,EAAE,kCAAoCiB,EAAK4D,SAAW,YAAc5D,EAAK6D,IAAI,GAAK,aAAe7D,EAAK6D,IAAI,GAAK,+BACvHC,KAAKJ,EAER3E,GAAE,qBAAqBoB,OAAOwD,GAE9BA,EACGzE,IAAI,OAASH,EAAE,qBAAqBgF,aAAe,EAAMJ,EAAKI,aAAe,GAC7EC,OACAC,SACAC,GAAG,YAAa,WACVnF,EAAEyB,MAAM2D,GAAG,cACdpF,EAAEyB,MAAMqB,SAAS,eAGpBqC,GAAG,YAAa,WACVnF,EAAEyB,MAAM2D,GAAG,cACdpF,EAAEyB,MAAMqB,SAAS,eAGpBqC,GAAG,UAAW,WACbnF,EAAEyB,MAAMhB,YAAY,yBAGpBJ,UACFuE,EAAKS,YAELT,EAAKS,WACHC,MAAO,WACL,MAAO7D,MAAK6D,QAAQxC,SAAS,aAOvC,QAASyC,cAAaC,GACpB,GAAIC,GAAQD,CAEZ,OAAO,UAASxC,EAAO0C,GACjBA,EAAGC,KAAKP,GAAG,SAAWK,EAAQ,MAChCzF,EAAEyB,MAAMqB,SAAS,gBAKvB,QAAS8C,cAAaJ,GACpB,GAAIC,GAAQD,CAEZ,OAAO,UAASxC,EAAO0C,GACrB,IAAKA,EAAGC,KAAKP,GAAG,SAAWK,EAAQ,KAEjC,WADAtC,IAAG,OAAQ,QAAS,WAAY,YAAauC,EAAGC,KAAKZ,OAAOnB,QAAQ,QAAS,IAI/ET,IAAG,OAAQ,QAAS,WAAY,UAAWuC,EAAGC,KAAKZ,OAAOnB,QAAQ,QAAS,IAE3E,IAAIiC,GAAIC,SAASJ,EAAGC,KAAK1E,KAAK,KAAM,IAChC8E,EAAID,SAASJ,EAAGC,KAAK1E,KAAK,KAAM,GAEpC,IAAIZ,UAAW,CACb,GAAIiF,GAAQI,EAAGC,KAAKL,OACpBI,GAAGC,KAAKK,YAAYV,GAEpBW,WAAW,WACTX,EACGxC,SAAS,YACT3C,KACC+F,KAAM,EACNC,IAAK,IAENhG,IAAIE,UAAW,aAAewF,EAAI,OAASE,EAAI,QACjD,SAEHL,GAAGC,KACA7C,SAAS,YACT3C,KACC+F,KAAML,EACNM,IAAKJ,IAENV,UAAU,UAGfZ,YAAW2B,aAEXpG,EAAEyB,MAAMhB,YAAY,gBAwNxB,QAAS4F,oBACQ,OAAXC,SACFA,OAAS,GAAIC,QAAOC,OAAO,eACzBC,eAAe,IAInB,IAAItE,GAAQmE,OAAOI,WAAa,EAC5BtE,EAASkE,OAAOK,YAAc,CAElCJ,QAAOK,MAAMC,QAAQ,mCAAoC,SAASC,GAChEA,EAAIC,KACFZ,IAAK,EACLD,KAAM,EACN/D,MAAOA,EACPC,OAAQA,EACR4E,OAAQ,SAASC,GACf,GAAIpB,KAAO1D,EAAQ,EAAK,GACpB4D,IAAO3D,EAAS,EAAK,GACrB8E,EAAI/E,EACJgF,EAAI/E,EACJgF,EAAI,EAEJF,GAAI,EAAIE,IACVA,EAAIF,EAAI,GAGNC,EAAI,EAAIC,IACVA,EAAID,EAAI,GAGVF,EAAII,YACJJ,EAAIK,OAAOzB,EAAIuB,EAAGrB,GAClBkB,EAAIM,MAAM1B,EAAIqB,EAAGnB,EAAGF,EAAIqB,EAAGnB,EAAIoB,EAAGC,GAClCH,EAAIM,MAAM1B,EAAIqB,EAAGnB,EAAIoB,EAAGtB,EAAGE,EAAIoB,EAAGC,GAClCH,EAAIM,MAAM1B,EAAGE,EAAIoB,EAAGtB,EAAGE,EAAGqB,GAC1BH,EAAIM,MAAM1B,EAAGE,EAAGF,EAAIqB,EAAGnB,EAAGqB,GAC1BH,EAAIO,eAIRlB,OAAOmB,IAAIX,GAEXA,EAAIY,eAGNpB,OAAOmB,IAAI,GAAIlB,QAAOoB,MAClBxB,IAAK,EACLD,KAAM,EACN/D,MAAOA,EACPC,OAAQA,EACRwF,KAAM,GACNC,YAAa,EACbC,OAAQ,UACRC,GAAI,GACJC,GAAI,MAGN1B,OAAOmB,IAAI,GAAIlB,QAAOoB,MACpBxB,IAAK,EACLD,KAAM,EACN/D,MAAOA,EAAQ,EACfC,OAAQA,EAAS,EACjBwF,KAAM,OACNK,QAAS,GACTF,GAAI,GACJC,GAAI,MAGRzB,OAAOK,MAAMC,QAAQ,wBAAyB,SAASC,GACrDA,EAAIC,KACFZ,IAAK,GACLD,KAAM,GACN/D,MAAO,IACPC,OAAQ,MAGVkE,OAAOmB,IAAIX,KAGRoB,eAKHC,mBAAmB7B,OAAQnE,EAAOC,GAJlCpC,EAAEwC,QAAQ4F,KAAK,WACbD,mBAAmB7B,OAAQnE,EAAOC,KAMtC9C,IAAI,mBAAmB+I,OACvB/I,IAAI,qBAAqB+I,OAG3B,QAASC,QAAOC,EAAKC,GAEnB,MADAA,GAAMA,GAAO,EACNC,MAAMD,GAAKE,KAAKH,GAGzB,QAASJ,oBAAmB7B,EAAQnE,EAAOC,GACzC,GAAIiB,GAAO,EAGTA,GADErD,EAAE,gCAAgCmE,OAAS,EACtCnE,EAAE,8BAA8BqD,OAEhCrD,EAAE,gCAAgCqD,MAQ3C,KAAK,GALDsF,IAAU,IAAMC,kBAAoB,KAAOvF,EAAKwF,eAAeC,MAAM,KACrEC,KACAC,EAAY,GACZC,EAAW,GAEN/E,EAAI,EAAGA,EAAIyE,EAAOxE,OAAQD,IAChB,KAAb+E,GACGA,EAAW,IAAMN,EAAOzE,IAAIC,OAAS6E,GACxCD,EAAMG,KAAKD,GACXA,EAAWN,EAAOzE,IAElB+E,GAAY,IAAMN,EAAOzE,GAG3B+E,EAAWN,EAAOzE,EAItB6E,GAAMG,KAAKD,EAIX,KAAK,GAFDE,IAAe,EAEVjF,EAAI,EAAGA,EAAI6E,EAAM5E,OAAQD,IAAK,CACrC,GAAIkF,IAAUC,KAEd,IAAIN,EAAM7E,GAAG5D,MAAM,KAGjB,IAAK,GAFDgJ,GAAUP,EAAM7E,GAAG4E,MAAM,IAEpBS,EAAK,EAAGA,EAAKD,EAAQnF,OAAQoF,IAChB,MAAhBD,EAAQC,GACNJ,KAAiB,EACnBA,GAAe,EACNA,KAAiB,IAC1BA,GAAe,GAERA,IACTC,EAAO,GAAGG,IACRC,eAAgB,aAMxB,IAAIC,GAAQ,GAAIlD,QAAOmD,MAAMX,EAAM7E,IACjCyF,WAAY,aACZC,SAAU,GACV1D,KAAM,IACNC,IAAK,IAAO,GAAKjC,EACjB/B,MAAOA,EAAQ,IACfiH,OAAQA,GAGV9C,GAAOmB,IAAIgC,GAEXA,EAAMI,UAGRvD,EAAOmB,IAAI,GAAIlB,QAAOuD,KAAK,UAAYxB,OAAO,IAAK,IAAM,SAAWtI,EAAE+J,OAAOC,KAAKhK,EAAEiK,MAAO,iBACzFN,WAAY,aACZC,SAAU,GACVzD,IAAK/D,EAAS,IACd8D,KAAM,MAGRI,EAAOmB,IAAI,GAAIlB,QAAO2D,MAAM,GAAI9H,EAAS,GAAI,IAAKA,EAAS,KACzD8D,KAAM,IACNC,IAAK/D,EAAS,GACd0F,OAAQ,OACRD,YAAa,KAGfvB,EAAOmB,IAAI,GAAIlB,QAAO2D,MAAM,GAAI9H,EAAS,GAAI,IAAKA,EAAS,KACzD8D,KAAM,IACNC,IAAK/D,EAAS,GACd0F,OAAQ,OACRD,YAAa,KAn3BjB,GAAIvI,KAAM,SAASD,GACjB,MAAOW,GAAEmK,SAASC,eAAe/K,KAO/B+G,YAAc,EACd8B,gBAAiB,EACjB5B,OAAS,KACTsC,kBAAoB,GACpBvH,WACAhB,UAAY,aAAe8J,UAASE,KAAKC,MACzC,YAAa,mBAAqBH,UAASE,KAAKC,MAChD,kBAAmB,gBAAkBH,UAASE,KAAKC,MACnD,eAAgB,cAAgBH,UAASE,KAAKC,MAC9C,aAAc,eAAiBH,UAASE,KAAKC,MAC7C,cAAe,IAEnB5K,QAAO6K,YACLC,UAAU,EACVC,UAAU,EACVtI,MAAO,KACPC,OAAQ,IACRsI,WAAY,OACZC,qBAAsB,OACtBC,OAAQ,EACRC,SAAU,GACVC,SAAU,EACVN,UAAU,EACVC,UAAU,EACVM,SAAS,EACTC,QAAQ,EACRN,WAAY,WAwGd1K,EAAE,mBAAmBmF,GAAG,QAAS,WAC/BzF,OAAO6D,SAGLvD,EAAE,gCAAgCiB,KAAK,aACzCjB,EAAE,0BACC8C,SAAS,QACT3C,IAAI,UAAW,GAGpBT,OAAOuL,iBAAiB,eAAgB,SAASjI,GAC/CzD,OAAM,EAEN,IAAIsB,GAAeb,EAAEgD,EAAMnC,cACvBqK,EAAgBlL,EAAEgD,EAAMkI,cAExBrK,GAAauC,KAAK,qBAAqBe,OAAS,GAClD7E,IAAI,oBAAoB6L,MAAM,QAG5BD,GAAiBA,EAAcjK,KAAK,cACtCjB,EAAE,0BACCS,YAAY,QACZN,IAAI,UAAW,GAElBkB,QAAQ6J,EAAcjK,KAAK,aAAac,SAGvClB,GAAgBA,EAAaI,KAAK,cACnCjB,EAAE,0BACC8C,SAAS,QACT3C,IAAI,UAAW,GAEkB,MAAhCH,EAAEwD,OAAO,oBAA+BlE,IAAI,cAAc8F,GAAG,2BAC/D/D,QAAQR,EAAaI,KAAK,aAAaO,QAIvCX,EAAauC,KAAK,qBAAqBe,OAAS,GAAsB,IAAhBiC,aAAqBvF,EAAauC,KAAK,4BAA4Be,OAAS,IACpInE,EAAE,eAAeoL,SAEjB7L,OAAM,GAENkF,SAAS2B,cAGPvF,EAAauC,KAAK,qBAAqBe,OAAS,GAA2B,KAAtByE,mBACvDrJ,OAAM,GAEN8G,oBAEe,OAAXC,QACFA,OAAO+E,QAIXlI,GAAG,OAAQ,WAAY,IAAMtC,EAAayK,KAAK,MAAM1H,QAAQ,IAAK,OAGpEtE,IAAI,qBAAqB6F,GAAG,QAAS,WACnC7F,IAAI,eAAe2F,OACnB3F,IAAI,gBAAgB+I,SAGc,MAAhCrI,EAAEwD,OAAO,oBACXlE,IAAI,cACD+I,OACA8C,MAAM,QAGXnL,EAAE,UAAUuL,YACZvL,EAAE,aAAawL,QACbC,cAAe,2BAGjBnM,IAAI,cAAc6F,GAAG,SAAU,WAC7B,GAAIuG,GAAQ1L,EAAEyB,MAAMrC,KAEQ,WAAxBsM,EAAMC,cACRrM,IAAI,mBAAmB+I,OAEvB/I,IAAI,mBAAmB2F,QAI3B,IAAInB,YACF8H,IAAK,QACLC,IAAK,OACLC,IAAK,OACLC,IAAK,SACLC,IAAK,QACLC,IAAK,UASHC,WAAa5M,IAAI,cACjB6M,YAAc7M,IAAI,cAEtB6M,aACGhH,GAAG,QAAS,KAAM,SAASnC,GAC1BA,EAAMoJ,iBAEN,IAAIC,GAAOrM,EAAEyB,MAAM4B,MAEnB6I,YAAW9M,IAAIiN,GAEfF,YACG1L,YAAY,cACZsE,KAAK,MAGZ/E,EAAEmK,UAAUhF,GAAG,QAAS,SAASnC,GAC1BkJ,WAAW9G,GAAGpC,EAAMsJ,UAAaH,YAAY/G,GAAGpC,EAAMsJ,SAAoD,IAAzCH,YAAYI,IAAIvJ,EAAMsJ,QAAQnI,SAClGgI,YACG1L,YAAY,cACZsE,KAAK,MAQZmH,WACG/G,GAAG,uBAAwBnF,EAAEwM,SAAS,WACrC,GAAIC,GAAUzM,EAAEyB,MAAMrC,MAElBsN,EAAmBlK,OAAOkK,oBAM9B,IAJAP,YACG1L,YAAY,cACZsE,KAAK,IAEJ0H,EAAS,CACXA,EAAU1I,aAAa0I,EAIvB,KAAK,GAFDE,MAEKzI,EAAI,EAAGA,EAAIwI,EAAiBvI,OAAQD,IAAK,CAChD,GAAImI,GAAOK,EAAiBxI,GAAGN,QAAQ,WAAY,IAC/CgJ,EAAU,GAAIC,QAAO,IAAMJ,EAAU,OAASA,EAAU,KAAM,KAE9DG,GAAQE,KAAKT,IACfM,EAAYzD,KAAKwD,EAAiBxI,IAItC,GAAIyI,EAAYxI,OAAS,EAAG,CAC1BgI,YAAYrJ,SAAS,aAErB,KAAK,GAAIoB,GAAI,EAAGA,EAAIyI,EAAYxI,OAAQD,IACtCiI,YAAY/K,OAAO,OAASqC,WAAWkJ,EAAYzI,IAAM,YAI9D,MAEL5E,IAAI,SACD6F,GAAG,YAAa,WACf7F,IAAI,qBAAqByN,KAAK,YAAY,KAE3C5H,GAAG,cAAe,WACjB7F,IAAI,qBAAqByN,KAAK,YAAY,KAG9CzN,IAAI,gBACD8D,KAAK,2DACH+B,GAAG,uBAAwB,WAC1BnF,EAAEyB,MAAMhB,YAAY,WAEvBuM,MACA5J,KAAK,UACH+B,GAAG,SAAU,WACZnF,EAAEyB,MAAMwL,QAAQ,sBAAsBxM,YAAY,WAGxDnB,IAAI,gBACD6F,GAAG,SAAU,WACZnF,EAAEyB,MAAM2B,KAAK,+EAA+E3C,YAAY,QAKxG,KAAK,GAHDyM,GAASlN,EAAEyB,MAAM0L,iBACjBC,GAAY,EAEPlJ,EAAI,EAAGA,EAAIgJ,EAAO/I,OAAQD,IAAK,CACtC,GAAI7E,GAAK,GACLgO,EAAQ,EAERrN,GAAEsN,QAAQJ,EAAOhJ,GAAGmI,MAAO,QAAS,2BAIhB,KAApBa,EAAOhJ,GAAGwH,MACZ2B,EAAQ,qBACoB,UAAnBH,EAAOhJ,GAAGmI,MAAqB,0BAA0BS,KAAKI,EAAOhJ,GAAGwH,OAErD,kBAAnBwB,EAAOhJ,GAAGmI,MAA4BvG,SAASoH,EAAOhJ,GAAGwH,SAAWnL,MAC7E8M,EAAQ,0BACoB,eAAnBH,EAAOhJ,GAAGmI,MAA2D,UAAlCa,EAAOhJ,GAAGwH,MAAMC,eAA8D,KAAjCrM,IAAI,mBAAmBF,QAChHC,EAAK,kBACLgO,EAAQ,6BALRA,EAAQ,oDAQNA,IACFhO,EAAK,EAAOA,EAAK6N,EAAOhJ,GAAGmI,KAEvB/M,IAAID,GAAI4N,QAAQ,sBAAsB9I,OAAS,EACjD7E,IAAID,GAAI4N,QAAQ,sBAAsBnK,SAAS,SAE/CxD,IAAID,GAAIyD,SAAS,SAGnBsK,GAAY,IAuBhB,MAnBKA,KACHpN,EAAEuN,MACEC,KAAM,OACNC,IAAK,6EAA+ErO,IAAI,QAAU,MAAQA,IAAI,SAASwE,QAAQ,IAAK,OAAS,SAA4CxE,IAAV,UAAtBA,IAAI,cAAgC,kBAAyB,cAAiB,WAAaA,IAAI,iBAAmB,YAAcA,IAAI,cAAgB,SAAWA,IAAI,cAAgB,SAC5UsO,aAAa,IAGdC,KAAK,WACJ3N,EAAEwD,OAAO,kBAAmB,KAAMoK,QAAS,KAC3CtO,IAAI,cAAc6L,MAAM,QAExBhI,GAAG,OAAQ,QAAS,OAAQ,SAAU,kBAE1CnD,EAAEwD,OAAO,kBAAmB,KAAMoK,QAAS,KAC3CtO,IAAI,cAAc6L,MAAM,QAExBhI,GAAG,OAAQ,QAAS,OAAQ,SAAU,kBAGjC,IAGXnD,EAAEwC,QAAQ2C,GAAG,gCAAiC,WAC5C3E,eAcFgC,OAAOkC,mBAAqBV,aAAaxB,OAAOkC,oBA+FhD1E,EAAE,uBACC6N,WACCC,OAAQ,SACRC,eAAgB/N,EAAEgO,OAEnB7I,GAAG,iBAAkBS,aAAa,WAClCT,GAAG,iBAAkBI,aAAa,WAClCJ,GAAG,gBAAiB,SAASnC,EAAO0C,GACnC1F,EAAEyB,MAAMhB,YAAY,iBAGxBT,EAAE,sBACC6N,WACCC,OAAQ,SACRC,eAAgB/N,EAAEgO,OAEnB7I,GAAG,iBAAkBS,aAAa,UAClCT,GAAG,iBAAkBI,aAAa,UAClCJ,GAAG,gBAAiB,SAASnC,EAAO0C,GACnC1F,EAAEyB,MAAMhB,YAAY,iBAGxBT,EAAEwC,QAAQ4F,KAAK,WACbF,gBAAiB,GAEV1F,OAAOC,SAAW,IAAInC,MAAM,aACjCN,EAAE,eAAeoL,SAEjB7L,OAAM,GAENkF,SAAS2B,gBAIbpG,EAAE,eAAemF,GAAG,QAAS,WAC3BhC,GAAG,OAAQ,QAAS,SAAU,QAASnD,EAAEyB,MAAM6J,KAAK,SAEpDtL,EAAEyB,MACC8B,OACE8E,OACF2E,MACA5B,WAGLpL,EAAE,wBAAwBmF,GAAG,QAAS,WACpCnF,EAAE,wBAAwBS,YAAY,WACtCT,EAAEyB,MAAMqB,SAAS,WAEjBK,GAAG,OAAQ,QAAS,SAAU,SAAUnD,EAAEyB,MAAM4B,QAEhD/D,IAAI,oBAAoB6L,MAAM,UAGhC7L,IAAI,qBAAqB6F,GAAG,QAAS,WASnC,MARAyD,mBAAoBtJ,IAAI,uBAAuBF,MAE3CwJ,oBACFzF,GAAG,OAAQ,QAAS,OAAQ,oBAAqByF,mBAEjDlJ,OAAO6D,SAGF,IAGTjE,IAAI,qBAAqB6F,GAAG,QAAS,WACnChC,GAAG,OAAQ,QAAS,SAAU,QAAS,yBAEvCyF,kBAAoB,GAEpBlJ,OAAOuO,SAGT,WAGE,QAASC,GAAWlL,EAAOmL,GACzBnL,IAAUA,EAAQuD,OAAO/D,OAAOQ,MAEhC,IAAIjD,GAAUiD,EAAMsJ,eACEtJ,GAAMoL,aAAeC,EAAUrL,EAAMoL,WAAa,MAEpEE,EAAS/H,OAAOgI,KAAKC,iBAAiBzO,EAASoO,GAE/CzN,EAAQZ,WAER+F,EAAI4I,EAASzL,GAASsL,EAAOpI,KAC7BH,EAAI2I,EAAS1L,GAASsL,EAAOnI,GAOjC,OALKnG,GAAEW,QAAQD,KACbmF,GAAQnF,EACRqF,GAAQrF,IAIRmF,EAAGA,EACHE,EAAGA,GAeP,QAAS4I,GAAY3L,EAAO4L,EAAUC,GACpC,GAAIC,GAA2B,aAAf9L,EAAMwK,KAAsB,iBAAmB,SAE/D,OAAQxK,GAAM8L,IAAc9L,EAAM8L,GAAW,GACxC9L,EAAM8L,GAAW,GAAGF,IAAa5L,EAAM8L,GAAW,GAAGF,GAAY5L,EAAM8L,GAAW,GAAGD,KACnF7L,EAAM6L,GACT7L,EAAM6L,GA3CZ,GAAIR,GAAU,UA0BVI,EAAW,SAASzL,GAItB,aAAeA,GAAM+L,UAAYV,EAAUrL,EAAM+L,QAAU,GAG7DL,EAAW,SAAS1L,GAClB,aAAeA,GAAMgM,UAAYX,EAAUrL,EAAMgM,QAAU,EAYzDzI,QAAO0I,mBACTR,EAAW,SAASzL,GAClB,MAAO2L,GAAY3L,EAAO,QAAS,YAErC0L,EAAW,SAAS1L,GAClB,MAAO2L,GAAY3L,EAAO,QAAS,aAIvCuD,OAAOC,OAAO0I,UAAUhB,WAAa,SAAUiB,EAAGC,EAAYjB,GACvDA,IACHA,EAAgB1M,KAAK0M,cAEvB,IAIIkB,GAJAC,EAAUpB,EAAWiB,EAAGhB,GACxBoB,EAASpB,EAAcqB,wBACvBC,EAAcF,EAAOpN,OAAS,EAC9BuN,EAAeH,EAAOnN,QAAU,CAkCpC,OA/BKqN,IAAgBC,IACf,OAASH,IAAU,UAAYA,KACjCG,EAAerL,KAAKsL,IAAKJ,EAAOpJ,IAAMoJ,EAAOK,SAE3C,SAAWL,IAAU,QAAUA,KACjCE,EAAcpL,KAAKsL,IAAKJ,EAAOM,MAAQN,EAAOrJ,QAIlDzE,KAAKqO,aAELR,EAAQzJ,EAAIyJ,EAAQzJ,EAAIpE,KAAKsO,QAAQ7J,KACrCoJ,EAAQvJ,EAAIuJ,EAAQvJ,EAAItE,KAAKsO,QAAQ5J,IAChCiJ,IACHE,EAAU/I,OAAOgI,KAAKyB,eACpBV,EACA/I,OAAOgI,KAAK0B,gBAAgBxO,KAAKyO,qBAMnCb,EAFkB,IAAhBI,GAAsC,IAAjBC,GAEVvN,MAAO,EAAGC,OAAQ,IAI7BD,MAAOgM,EAAchM,MAAQsN,EAC7BrN,OAAQ+L,EAAc/L,OAASsN,IAKjC7J,EAAGyJ,EAAQzJ,EAAIwJ,EAASlN,MACxB4D,EAAGuJ,EAAQvJ,EAAIsJ,EAASjN,SAI5BmE,OAAOmD,MAAMwF,UAAUiB,sBAAwB,SAASlJ,EAAKmJ,EAAkBlK,EAAMC,EAAKkK,EAAQC,EAAWC,GAC3G,GAAI/G,GAAiB4G,EACZA,EAAiB5G,gBAAkB/H,KAAK+H,eACzC/H,KAAK+H,cAERA,KAIDA,EAAegH,QAAQ,iBACzBvJ,EAAIwJ,SACFvK,EACAC,EAAMoK,EAAa,GACnBD,EACA,GAGA9G,EAAegH,QAAQ,oBACzBvJ,EAAIwJ,SACFvK,EACAC,EAAMoK,GAAc9O,KAAKiP,kBAAoBjP,KAAKkP,cAAgB,GAAKJ,EAAa,GACpFD,EACAC,EAAa,IAGb/G,EAAegH,QAAQ,gBACzBvJ,EAAIwJ,SACFvK,EACAC,GAAO1E,KAAKkP,cAAgBlP,KAAKiP,mBAAqBH,EACtDD,EACAC,EAAa,SA+LrBjR,IAAI,mBAAmB6F,GAAG,QAAS,WAClB,OAAXmB,SAEE,SAASwG,KAAK8D,UAAUC,YAAc3Q,WAAW0Q,UAAUE,WAAWhI,MAAM,QAAQ,IAAM,GAC5FtG,OACGuO,OACA5G,SAAS6G,MAAM,aAAe1K,OAAO2K,YAAc,MAEtD9G,SACGC,eAAe,eACf8G,OAAO,SAASC,GACfC,OAAOD,EAAM,qBAInBhO,GAAG,OAAQ,QAAS,SAAU,QAAS","file":"application.js","sourcesContent":["// micro optimization\r\nvar $id = function(id) {\r\n  return $(document.getElementById(id));\r\n};\r\n\r\nfunction val(id) {\r\n  return $id(id).val();\r\n}\r\n\r\nvar currentWord = 0;\r\nvar windowIsLoaded = false;\r\nvar canvas = null;\r\nvar nameOnCertificate = '';\r\nvar players = {};\r\nvar transform = 'transform' in document.body.style\r\n  ? 'transform': 'webkitTransform' in document.body.style\r\n  ? 'webkitTransform': 'mozTransform' in document.body.style\r\n  ? 'mozTransform': 'oTransform' in document.body.style\r\n  ? 'oTransform': 'msTransform' in document.body.style\r\n  ? 'msTransform': null;\r\n\r\nReveal.initialize({\r\n  controls: true,\r\n  progress: true,\r\n  width: 1200,\r\n  height: 853,\r\n  transition: 'fade',\r\n  backgroundTransition: 'fade',\r\n  margin: 0.0,\r\n  minScale: 0.2,\r\n  maxScale: 2,\r\n  controls: true,\r\n  progress: true,\r\n  history: true,\r\n  center: true,\r\n  transition: 'convex'\r\n});\r\n\r\nfunction touch(enable) {\r\n  enable = (enable !== null) ? !!enable : true;\r\n\r\n  var config = Reveal.getConfig();\r\n  config.touch = enable;\r\n\r\n  Reveal.removeEventListeners();\r\n  Reveal.addEventListeners();\r\n}\r\n\r\nfunction getScale() {\r\n  var element = $('div.slides');\r\n  var zoom = parseFloat(element.css('zoom'));\r\n  var matches = element.css(transform).match(/matrix\\((-?\\d*\\.?\\d+),\\s*-?\\d*\\.?\\d+,\\s*-?\\d*\\.?\\d+,\\s*(-?\\d*\\.?\\d+),\\s*-?\\d*\\.?\\d+,\\s*-?\\d*\\.?\\d+\\)/);\r\n\r\n  if (isNaN(zoom) || matches !== null) {\r\n    zoom = [matches[1], matches[2]];\r\n  }\r\n\r\n  return zoom;\r\n}\r\n\r\nfunction scaleForms() {\r\n  var element = $('#intro-form, #pledge-name-form').removeClass('center');\r\n  var scale = getScale();\r\n\r\n  if ($.isArray(scale)) {\r\n    element.css(transform, 'translate(-50%, -50%) scaleX(' + scale[0] + ') scaleY(' + scale[1] + ')');\r\n  } else {\r\n    element\r\n      .css(transform, 'translate(-50%, -50%)')\r\n      .css('zoom', scale);\r\n  }\r\n}\r\n\r\nfunction onYouTubeIframeAPIReady() {\r\n  var currentSlide = $('div.slides > section.present');\r\n\r\n  $('div.slides > section').each(function(index, slide) {\r\n    if ($(slide).data('video-id')) {\r\n      var videoId = $(slide).data('video-id');\r\n      var div = $('<div id=\"video-' + videoId + '\">');\r\n      $('div.backgrounds > div:eq(' + index + ')').append(div);\r\n\r\n      players[videoId] = {\r\n        player: null,\r\n        isReady: false,\r\n        play: function() {\r\n          if (this.isReady) {\r\n            this.player.playVideo();\r\n          } else {\r\n            var _this = this;\r\n\r\n            var timer = setInterval(function() {\r\n              if (_this.isReady) {\r\n                _this.player.playVideo();\r\n                clearInterval(timer);\r\n              }\r\n            }, 500);\r\n          }\r\n        },\r\n        pause: function() {\r\n          if (this.isReady) {\r\n            this.player.pauseVideo();\r\n          }\r\n        }\r\n      };\r\n\r\n      players[videoId].player = new YT.Player('video-' + videoId, {\r\n        width: '100%',\r\n        height: '100%',\r\n        videoId: videoId,\r\n        playerVars: {\r\n          fs: 0,\r\n          origin: window.location.protocol + '//' + window.location.hostname\r\n        },\r\n        events: {\r\n          'onReady': function() {\r\n            players[videoId].isReady = true;\r\n            $id('video-' + videoId).addClass('video');\r\n          },\r\n          'onStateChange': function(event) {\r\n            if (event.data == YT.PlayerState.PLAYING) {\r\n              // don't use currentSlide\r\n              ga('send', 'event', 'Video', 'play', $('div.slides > section.present').find('h1').text());\r\n            }\r\n\r\n            if (event.data == YT.PlayerState.ENDED) {\r\n              Reveal.next();\r\n            }\r\n          }\r\n        }\r\n      });\r\n    }\r\n  });\r\n\r\n  if (currentSlide && currentSlide.data('video-id') && $.cookie('hide_intro_form') === '1') {\r\n    players[currentSlide.data('video-id')].play();\r\n  }\r\n}\r\n\r\n$('button.play-btn').on('click', function() {\r\n  Reveal.next();\r\n});\r\n\r\nif ($('div.slides > section.present').data('video-id')) {\r\n  $('.reveal > .backgrounds')\r\n    .addClass('dark')\r\n    .css('z-index', 2);\r\n}\r\n\r\nReveal.addEventListener('slidechanged', function(event) {\r\n  touch(true);\r\n\r\n  var currentSlide = $(event.currentSlide);\r\n  var previousSlide = $(event.previousSlide);\r\n\r\n  if (currentSlide.find('div.interactive-3').length < 1) {\r\n    $id('pledge-name-form').popup('hide');\r\n  }\r\n\r\n  if (previousSlide && previousSlide.data('video-id')) {\r\n    $('.reveal > .backgrounds')\r\n      .removeClass('dark')\r\n      .css('z-index', 0);\r\n\r\n    players[previousSlide.data('video-id')].pause();\r\n  }\r\n\r\n  if(currentSlide && currentSlide.data('video-id')) {\r\n    $('.reveal > .backgrounds')\r\n      .addClass('dark')\r\n      .css('z-index', 2);\r\n\r\n    if ($.cookie('hide_intro_form') === '1' || !$id('intro-form').is('.popup_content_visible')) {\r\n      players[currentSlide.data('video-id')].play();\r\n    }\r\n  }\r\n\r\n  if (currentSlide.find('div.interactive-1').length > 0 && (currentWord === 0 && currentSlide.find('div.skinny:not(.preload)').length < 1)) {\r\n    $('div.preload').remove();\r\n\r\n    touch(false);\r\n\r\n    showWord(currentWord);\r\n  }\r\n\r\n  if (currentSlide.find('div.interactive-4').length > 0 && nameOnCertificate !== '') {\r\n    touch(false);\r\n\r\n    initializeCanvas();\r\n  } else {\r\n    if (canvas !== null) {\r\n      canvas.clear();\r\n    }\r\n  }\r\n\r\n  ga('send', 'pageview', '/' + currentSlide.attr('id').replace(/#/, ''));\r\n});\r\n\r\n$id('show-second-block').on('click', function() {\r\n  $id('first-block').hide();\r\n  $id('second-block').show();\r\n});\r\n\r\nif ($.cookie('hide_intro_form') !== '1') {\r\n  $id('intro-form')\r\n    .show()\r\n    .popup('show');\r\n}\r\n\r\n$('select').selectric();\r\n$(':checkbox').iCheck({\r\n  checkboxClass: 'icheckbox_minimal-blue'\r\n});\r\n\r\n$id('schoolrole').on('change', function() {\r\n  var value = $(this).val();\r\n\r\n  if (value.toLowerCase() === 'other') {\r\n    $id('schoolroleother').show();\r\n  } else {\r\n    $id('schoolroleother').hide();\r\n  }\r\n});\r\n\r\nvar entityMap = {\r\n  \"&\": \"&amp;\",\r\n  \"<\": \"&lt;\",\r\n  \">\": \"&gt;\",\r\n  '\"': '&quot;',\r\n  \"'\": '&#39;',\r\n  \"/\": '&#x2F;'\r\n};\r\n\r\nfunction escapeHtml(string) {\r\n  return String(string).replace(/[&<>\"'\\/]/g, function (s) {\r\n    return entityMap[s];\r\n  });\r\n}\r\n\r\nvar schoolname = $id('schoolname');\r\nvar schoolnames = $id('schoolnames');\r\n\r\nschoolnames\r\n  .on('click', 'li', function(event) {\r\n    event.stopPropagation();\r\n\r\n    var name = $(this).text();\r\n\r\n    schoolname.val(name);\r\n\r\n    schoolnames\r\n      .removeClass('has-values')\r\n      .html('');\r\n  });\r\n\r\n$(document).on('click', function(event) {\r\n  if (!schoolname.is(event.target) || (!schoolnames.is(event.target) && schoolnames.has(event.target).length === 0)) {\r\n    schoolnames\r\n      .removeClass('has-values')\r\n      .html('');\r\n  }\r\n});\r\n\r\nfunction escapeRegExp(string){\r\n  return string.replace(/[.*+?^${}()|[\\]\\\\]/g, \"\\\\$&\");\r\n}\r\n\r\nschoolname\r\n  .on('input propertychange', $.debounce(function() {\r\n    var keyword = $(this).val();\r\n\r\n    var schoolnamesArray = window.schoolnamesArray || [];\r\n\r\n    schoolnames\r\n      .removeClass('has-values')\r\n      .html('');\r\n\r\n    if (keyword) {\r\n      keyword = escapeRegExp(keyword);\r\n\r\n      var foundValues = [];\r\n\r\n      for (var i = 0; i < schoolnamesArray.length; i++) {\r\n        var name = schoolnamesArray[i].replace(/(\\(|\\))/g, '');\r\n        var pattern = new RegExp('^' + keyword + '|\\\\s' + keyword + '.*', 'ig');\r\n\r\n        if (pattern.test(name)) {\r\n          foundValues.push(schoolnamesArray[i]);\r\n        }\r\n      }\r\n\r\n      if (foundValues.length > 0) {\r\n        schoolnames.addClass('has-values');\r\n\r\n        for (var i = 0; i < foundValues.length; i++) {\r\n          schoolnames.append('<li>' + escapeHtml(foundValues[i]) + '</li>');\r\n        };\r\n      }\r\n    }\r\n  }, 500));\r\n\r\n$id('agree')\r\n  .on('ifChecked', function() {\r\n    $id('submit-intro-form').prop('disabled', false);\r\n  })\r\n  .on('ifUnchecked', function() {\r\n    $id('submit-intro-form').prop('disabled', true);\r\n  });\r\n\r\n$id('second-block')\r\n  .find('input[type=text], input[type=number], input[type=email]')\r\n    .on('input propertychange', function() {\r\n      $(this).removeClass('error');\r\n    })\r\n  .end()\r\n  .find('select')\r\n    .on('change', function() {\r\n      $(this).parents('.selectric-wrapper').removeClass('error');\r\n    });\r\n\r\n$id('second-block')\r\n  .on('submit', function() {\r\n    $(this).find('input[type=text], input[type=number], input[type=email], .selectric-wrapper').removeClass('error');\r\n\r\n    var fields = $(this).serializeArray();\r\n    var isOnError = false;\r\n\r\n    for (var i = 0; i < fields.length; i++) {\r\n      var id = '';\r\n      var error = '';\r\n\r\n      if ($.inArray(fields[i].name, ['agree', 'schoolroleother']) !== -1) {\r\n        continue;\r\n      }\r\n\r\n      if (fields[i].value === '') {\r\n        error = 'Field is required.';\r\n      } else if (fields[i].name === 'email' && !/(\\.edu\\.au|\\.org\\.au)$/i.test(fields[i].value)) {\r\n        error = 'Email address must contain \".edu.au\" or \".org.au\"';\r\n      } else if (fields[i].name === 'totalstudents' && parseInt(fields[i].value) === isNaN) {\r\n        error = 'Field expects a number.';\r\n      } else if (fields[i].name === 'schoolrole' && fields[i].value.toLowerCase() === 'other' && $id('schoolroleother').val() === '') {\r\n        id = 'schoolroleother';\r\n        error = 'Please specify your role.';\r\n      }\r\n\r\n      if (error) {\r\n        id = (id) ? id : fields[i].name;\r\n\r\n        if ($id(id).parents('.selectric-wrapper').length > 0) {\r\n          $id(id).parents('.selectric-wrapper').addClass('error');\r\n        } else {\r\n          $id(id).addClass('error');\r\n        }\r\n\r\n        isOnError = true;\r\n      }\r\n    };\r\n    \r\n    if (!isOnError) {\r\n      $.ajax({\r\n          type: 'POST',\r\n          url: 'http://integr8a.trclient.com/UnileverDove_S/Ajaxcall.aspx?do=submit2&name=' + val('name') + '&e=' + val('email').replace('+', '%2B') + '&role=' + (val('schoolrole') === 'Other' ? val('schoolroleother') : val('schoolrole')) + '&NoStud=' + val('totalstudents') + '&NSchool=' + val('schoolname') + '&year=' + val('schoolyear') + '&opt=1',\r\n          crossDomain: true/*,\r\n          data: $(this).serialize()*/\r\n        })\r\n        .done(function() {\r\n          $.cookie('hide_intro_form', '1', {expires: 0.5});\r\n          $id('intro-form').popup('hide');\r\n\r\n          ga('send', 'event', 'Form', 'submit', 'Initial form');\r\n        });\r\n      $.cookie('hide_intro_form', '1', {expires: 0.5});\r\n      $id('intro-form').popup('hide');\r\n\r\n      ga('send', 'event', 'Form', 'submit', 'Initial form');\r\n    }\r\n\r\n    return false;\r\n  });\r\n\r\n$(window).on('load resize orientationchange', function() {\r\n  scaleForms();\r\n});\r\n\r\nfunction shuffleArray(array) {\r\n  for (var i = array.length - 1; i > 0; i--) {\r\n    var j = Math.floor(Math.random() * (i + 1));\r\n    var temp = array[i];\r\n    array[i] = array[j];\r\n    array[j] = temp;\r\n  }\r\n\r\n  return array;\r\n}\r\n\r\nwindow.timelineWordsArray = shuffleArray(window.timelineWordsArray);\r\n\r\nfunction showWord(index) {\r\n  if (index < window.timelineWordsArray.length) {\r\n    var data = window.timelineWordsArray[index];\r\n    var words = data.words.replace(/\\n/g, '<br>');\r\n\r\n    var word = $('<div class=\"skinny words\" data-' + data.timeline + ' data-x=\"' + data.pos[0] + '\" data-y=\"' + data.pos[1] + '\" style=\"top: 15px;\"></div>')\r\n      .html(words);\r\n\r\n    $('div.interactive-1').append(word);\r\n\r\n    word\r\n      .css('left', ($('div.interactive-1').outerWidth() / 2) - (word.outerWidth() / 2))\r\n      .hide()\r\n      .fadeIn()\r\n      .on('mouseover', function() {\r\n        if (!$(this).is('.minimize')) {\r\n          $(this).addClass('mouseover');\r\n        }\r\n      })\r\n      .on('mousedown', function() {\r\n        if (!$(this).is('.minimize')) {\r\n          $(this).addClass('mousedown');\r\n        }\r\n      })\r\n      .on('mouseup', function() {\r\n        $(this).removeClass('mouseover mousedown');\r\n      });\r\n\r\n    if (transform) {\r\n      word.draggable();\r\n    } else {\r\n      word.draggable({\r\n        clone: function() {\r\n          return this.clone().addClass('clone');\r\n        }\r\n      });\r\n    }\r\n  }\r\n}\r\n\r\nfunction dragListener(time) {\r\n  var _time = time;\r\n\r\n  return function(event, ui) {\r\n    if (ui.item.is('[data-' + _time + ']')) {\r\n      $(this).addClass('drop-active');\r\n    }\r\n  };\r\n}\r\n\r\nfunction dropListener(time) {\r\n  var _time = time;\r\n\r\n  return function(event, ui) {\r\n    if (!ui.item.is('[data-' + _time + ']')) {\r\n      ga('send', 'event', 'Timeline', 'incorrect', ui.item.html().replace(/<br>/g, ''));\r\n      return;\r\n    }\r\n\r\n    ga('send', 'event', 'Timeline', 'correct', ui.item.html().replace(/<br>/g, ''));\r\n\r\n    var x = parseInt(ui.item.data('x'), 10);\r\n    var y = parseInt(ui.item.data('y'), 10);\r\n\r\n    if (transform) {\r\n      var clone = ui.item.clone();\r\n      ui.item.replaceWith(clone);\r\n\r\n      setTimeout(function() {\r\n        clone\r\n          .addClass('minimize')\r\n          .css({\r\n            left: 0,\r\n            top: 0\r\n          })\r\n          .css(transform, 'translate(' + x + 'px, ' + y + 'px)');\r\n      }, 251);\r\n    } else {\r\n      ui.item\r\n        .addClass('minimize')\r\n        .css({\r\n          left: x,\r\n          top: y\r\n        })\r\n        .draggable('disable');\r\n    }\r\n\r\n    showWord(++currentWord);\r\n\r\n    $(this).removeClass('drop-active');\r\n  };\r\n}\r\n\r\n$('div.before.dropzone')\r\n  .droppable({\r\n    accept: '.words',\r\n    receiveHandler: $.noop\r\n  })\r\n  .on('droppable:drop', dropListener('before'))\r\n  .on('droppable:over', dragListener('before'))\r\n  .on('droppable:out', function(event, ui) {\r\n    $(this).removeClass('drop-active');\r\n  });\r\n\r\n$('div.after.dropzone')\r\n  .droppable({\r\n    accept: '.words',\r\n    receiveHandler: $.noop\r\n  })\r\n  .on('droppable:drop', dropListener('after'))\r\n  .on('droppable:over', dragListener('after'))\r\n  .on('droppable:out', function(event, ui) {\r\n    $(this).removeClass('drop-active');\r\n  });\r\n\r\n$(window).load(function() {\r\n  windowIsLoaded = true;\r\n\r\n  if (!!(window.location + '').match(/page-11/)) {\r\n    $('div.preload').remove();\r\n\r\n    touch(false);\r\n\r\n    showWord(currentWord); // have to wait for the custom font to load\r\n  }\r\n});\r\n\r\n$('.box button').on('click', function() {\r\n  ga('send', 'event', 'Button', 'click', $(this).attr('name'));\r\n\r\n  $(this)\r\n    .next()\r\n      .show()\r\n    .end()\r\n    .remove();\r\n});\r\n\r\n$('div.interactive-3 li').on('click', function() {\r\n  $('div.interactive-3 li').removeClass('checked');\r\n  $(this).addClass('checked');\r\n\r\n  ga('send', 'event', 'Pledge', 'select', $(this).text());\r\n\r\n  $id('pledge-name-form').popup('show');\r\n});\r\n\r\n$id('enter-pledge-name').on('click', function() {\r\n  nameOnCertificate = $id('name-on-certificate').val();\r\n\r\n  if (nameOnCertificate) {\r\n    ga('send', 'event', 'Form', 'enter-pledge-name', nameOnCertificate);\r\n\r\n    Reveal.next();\r\n  }\r\n\r\n  return false;\r\n});\r\n\r\n$id('create-new-pledge').on('click', function() {\r\n  ga('send', 'event', 'Button', 'click', 'Create another pledge');\r\n\r\n  nameOnCertificate = '';\r\n\r\n  Reveal.prev();\r\n});\r\n\r\n(function() {\r\n  var unknown = 'unknown';\r\n\r\n  function getPointer(event, upperCanvasEl) {\r\n    event || (event = fabric.window.event);\r\n\r\n    var element = event.target ||\r\n                  (typeof event.srcElement !== unknown ? event.srcElement : null),\r\n\r\n        scroll = fabric.util.getScrollLeftTop(element, upperCanvasEl);\r\n\r\n    var scale = getScale();\r\n\r\n    var x = pointerX(event) + scroll.left;\r\n    var y = pointerY(event) + scroll.top;\r\n\r\n    if (!$.isArray(scale)) {\r\n      x = x / scale;\r\n      y = y / scale;\r\n    }\r\n\r\n    return {\r\n      x: x,\r\n      y: y\r\n    };\r\n  }\r\n\r\n  var pointerX = function(event) {\r\n    // looks like in IE (<9) clientX at certain point (apparently when mouseup fires on VML element)\r\n    // is represented as COM object, with all the consequences, like \"unknown\" type and error on [[Get]]\r\n    // need to investigate later\r\n    return (typeof event.clientX !== unknown ? event.clientX : 0);\r\n  },\r\n\r\n  pointerY = function(event) {\r\n    return (typeof event.clientY !== unknown ? event.clientY : 0);\r\n  };\r\n\r\n  function _getPointer(event, pageProp, clientProp) {\r\n    var touchProp = event.type === 'touchend' ? 'changedTouches' : 'touches';\r\n\r\n    return (event[touchProp] && event[touchProp][0]\r\n      ? (event[touchProp][0][pageProp] - (event[touchProp][0][pageProp] - event[touchProp][0][clientProp]))\r\n        || event[clientProp]\r\n      : event[clientProp]);\r\n  }\r\n\r\n  if (fabric.isTouchSupported) {\r\n    pointerX = function(event) {\r\n      return _getPointer(event, 'pageX', 'clientX');\r\n    };\r\n    pointerY = function(event) {\r\n      return _getPointer(event, 'pageY', 'clientY');\r\n    };\r\n  }\r\n\r\n  fabric.Canvas.prototype.getPointer = function (e, ignoreZoom, upperCanvasEl) {\r\n    if (!upperCanvasEl) {\r\n      upperCanvasEl = this.upperCanvasEl;\r\n    }\r\n    var pointer = getPointer(e, upperCanvasEl),\r\n        bounds = upperCanvasEl.getBoundingClientRect(),\r\n        boundsWidth = bounds.width || 0,\r\n        boundsHeight = bounds.height || 0,\r\n        cssScale;\r\n\r\n    if (!boundsWidth || !boundsHeight ) {\r\n      if ('top' in bounds && 'bottom' in bounds) {\r\n        boundsHeight = Math.abs( bounds.top - bounds.bottom );\r\n      }\r\n      if ('right' in bounds && 'left' in bounds) {\r\n        boundsWidth = Math.abs( bounds.right - bounds.left );\r\n      }\r\n    }\r\n\r\n    this.calcOffset();\r\n\r\n    pointer.x = pointer.x - this._offset.left;\r\n    pointer.y = pointer.y - this._offset.top;\r\n    if (!ignoreZoom) {\r\n      pointer = fabric.util.transformPoint(\r\n        pointer,\r\n        fabric.util.invertTransform(this.viewportTransform)\r\n      );\r\n    }\r\n\r\n    if (boundsWidth === 0 || boundsHeight === 0) {\r\n      // If bounds are not available (i.e. not visible), do not apply scale.\r\n      cssScale = { width: 1, height: 1 };\r\n    }\r\n    else {\r\n      cssScale = {\r\n        width: upperCanvasEl.width / boundsWidth,\r\n        height: upperCanvasEl.height / boundsHeight\r\n      };\r\n    }\r\n\r\n    return {\r\n      x: pointer.x * cssScale.width,\r\n      y: pointer.y * cssScale.height\r\n    };\r\n  };\r\n\r\n  fabric.IText.prototype._renderCharDecoration = function(ctx, styleDeclaration, left, top, offset, charWidth, charHeight) {\r\n    var textDecoration = styleDeclaration\r\n          ? (styleDeclaration.textDecoration || this.textDecoration)\r\n          : this.textDecoration;\r\n\r\n    if (!textDecoration) {\r\n      return;\r\n    }\r\n\r\n    if (textDecoration.indexOf('underline') > -1) {\r\n      ctx.fillRect(\r\n        left,\r\n        top + charHeight / 10,\r\n        charWidth,\r\n        1\r\n      );\r\n    }\r\n    if (textDecoration.indexOf('line-through') > -1) {\r\n      ctx.fillRect(\r\n        left,\r\n        top - charHeight * (this._fontSizeFraction + this._fontSizeMult - 1) + charHeight / 15,\r\n        charWidth,\r\n        charHeight / 15\r\n      );\r\n    }\r\n    if (textDecoration.indexOf('overline') > -1) {\r\n      ctx.fillRect(\r\n        left,\r\n        top - (this._fontSizeMult - this._fontSizeFraction) * charHeight,\r\n        charWidth,\r\n        charHeight / 15\r\n      );\r\n    }\r\n  };\r\n})();\r\n\r\nfunction initializeCanvas() {\r\n  if (canvas === null) {\r\n    canvas = new fabric.Canvas('certificate', {\r\n      isDrawingMode: true\r\n    });\r\n  }\r\n\r\n  var width = canvas.getWidth() - 5;\r\n  var height = canvas.getHeight() - 5;\r\n\r\n  fabric.Image.fromURL('images/page36/certificate-bg.png', function(img) {\r\n    img.set({\r\n      top: 0,\r\n      left: 0,\r\n      width: width,\r\n      height: height,\r\n      clipTo: function(ctx) {\r\n        var x = -((width / 2) - 1);\r\n        var y = -((height / 2) - 1);\r\n        var w = width;\r\n        var h = height;\r\n        var r = 40;\r\n\r\n        if (w < 2 * r) {\r\n          r = w / 2;\r\n        }\r\n\r\n        if (h < 2 * r) {\r\n          r = h / 2;\r\n        }\r\n\r\n        ctx.beginPath();\r\n        ctx.moveTo(x + r, y);\r\n        ctx.arcTo(x + w, y, x + w, y + h, r);\r\n        ctx.arcTo(x + w, y + h, x, y + h, r);\r\n        ctx.arcTo(x, y + h, x, y, r);\r\n        ctx.arcTo(x, y, x + w, y, r);\r\n        ctx.closePath();\r\n      }\r\n    });\r\n\r\n    canvas.add(img);\r\n\r\n    img.sendToBack();\r\n  });\r\n\r\n  canvas.add(new fabric.Rect({\r\n      top: 0,\r\n      left: 0,\r\n      width: width,\r\n      height: height,\r\n      fill: '',\r\n      strokeWidth: 5,\r\n      stroke: '#7DB2DB',\r\n      rx: 40,\r\n      ry: 40\r\n    }));\r\n\r\n    canvas.add(new fabric.Rect({\r\n      top: 5,\r\n      left: 5,\r\n      width: width - 5,\r\n      height: height - 5,\r\n      fill: '#FFF',\r\n      opacity: 0.4,\r\n      rx: 38,\r\n      ry: 38\r\n    }));\r\n\r\n  fabric.Image.fromURL('images/dove-logo2.png', function(img) {\r\n    img.set({\r\n      top: 50,\r\n      left: 50,\r\n      width: 181,\r\n      height: 123\r\n    });\r\n\r\n    canvas.add(img);\r\n  });\r\n\r\n  if (!windowIsLoaded) {\r\n    $(window).load(function() {\r\n      addDetailsToCanvas(canvas, width, height);\r\n    });\r\n  } else {\r\n    addDetailsToCanvas(canvas, width, height);\r\n  }\r\n\r\n  $id('download-pledge').show();\r\n  $id('create-new-pledge').show();\r\n}\r\n\r\nfunction repeat(str, chr){\r\n  chr = chr || 1;\r\n  return Array(chr).join(str);\r\n}\r\n\r\nfunction addDetailsToCanvas(canvas, width, height) {\r\n  var text = '';\r\n\r\n  if ($('div.interactive-3 li.checked').length < 1) {\r\n    text = $('div.interactive-3 li:eq(0)').text();\r\n  } else {\r\n    text = $('div.interactive-3 li.checked').text();\r\n  }\r\n\r\n  var tokens = ('\"' + nameOnCertificate + '\" ' + text.toUpperCase()).split(' ');\r\n  var lines = [];\r\n  var lineLimit = 40;\r\n  var lineText = '';\r\n\r\n  for (var i = 0; i < tokens.length; i++) {\r\n    if (lineText !== '') {\r\n      if ((lineText + ' ' + tokens[i]).length > lineLimit) {\r\n        lines.push(lineText);\r\n        lineText = tokens[i];\r\n      } else {\r\n        lineText += ' ' + tokens[i];\r\n      }\r\n    } else {\r\n      lineText = tokens[i];\r\n    }\r\n  }\r\n\r\n  lines.push(lineText);\r\n\r\n  var addUnderline = false;\r\n\r\n  for (var i = 0; i < lines.length; i++) {\r\n    var styles = {0: {}};\r\n\r\n    if (lines[i].match(/\"/)) {\r\n      var _tokens = lines[i].split('');\r\n\r\n      for (var _i = 0; _i < _tokens.length; _i++) {\r\n        if (_tokens[_i] === '\"') {\r\n          if (addUnderline === false) {\r\n            addUnderline = true;\r\n          } else if (addUnderline === true) {\r\n            addUnderline = false;\r\n          }\r\n        } else if (addUnderline) {\r\n          styles[0][_i] = {\r\n            textDecoration: 'underline'\r\n          };\r\n        }\r\n      }\r\n    }\r\n\r\n    var _text = new fabric.IText(lines[i], {\r\n      fontFamily: 'skinnycaps',\r\n      fontSize: 80,\r\n      left: 100,\r\n      top: 250 + (60 * i),\r\n      width: width - 120,\r\n      styles: styles\r\n    });\r\n\r\n    canvas.add(_text);\r\n\r\n    _text.centerH();\r\n  }\r\n\r\n  canvas.add(new fabric.Text('Signed ' + repeat(' ', 11) + ' Date ' + $.format.date($.now(), 'MMMM d, yyyy'), {\r\n    fontFamily: 'skinnycaps',\r\n    fontSize: 80,\r\n    top: height - 100,\r\n    left: 90\r\n  }));\r\n\r\n  canvas.add(new fabric.Line([10, height - 28, 270, height - 28], {\r\n    left: 230,\r\n    top: height - 27,\r\n    stroke: '#000',\r\n    strokeWidth: 2\r\n  }));\r\n\r\n  canvas.add(new fabric.Line([10, height - 28, 385, height - 28], {\r\n    left: 628,\r\n    top: height - 27,\r\n    stroke: '#000',\r\n    strokeWidth: 2\r\n  }));\r\n}\r\n\r\n$id('download-pledge').on('click', function() {\r\n  if (canvas !== null) {\r\n\r\n    if (/MSIE\\s/.test(navigator.userAgent) && parseFloat(navigator.appVersion.split('MSIE')[1]) < 10) {\r\n      window\r\n        .open()\r\n        .document.write('<img src=\"' + canvas.toDataURL() + '\">');\r\n    } else {\r\n      document\r\n        .getElementById('certificate')\r\n        .toBlob(function(blob) {\r\n          saveAs(blob, 'certificate.png');\r\n        });\r\n    }\r\n\r\n    ga('send', 'event', 'Button', 'click', 'Download this pledge');\r\n  }\r\n});\r\n\r\n\r\n"]}