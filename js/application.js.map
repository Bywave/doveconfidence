{"version":3,"sources":["application.js"],"names":["touch","enable","config","Reveal","getConfig","removeEventListeners","addEventListeners","getScale","element","$","zoom","parseFloat","css","matches","transform","match","isNaN","scaleForms","removeClass","scale","isArray","onYouTubeIframeAPIReady","currentSlide","each","index","slide","data","videoId","div","append","players","player","isReady","play","this","playVideo","_this","timer","setInterval","clearInterval","pause","pauseVideo","YT","Player","width","height","playerVars","fs","origin","window","location","protocol","hostname","events","onReady","$id","addClass","onStateChange","event","PlayerState","PLAYING","ga","find","text","ENDED","next","cookie","escapeHtml","string","String","replace","s","entityMap","escapeRegExp","shuffleArray","array","i","length","j","Math","floor","random","temp","showWord","timelineWordsArray","words","word","timeline","pos","html","outerWidth","hide","fadeIn","on","is","draggable","clone","dragListener","time","_time","ui","item","dropListener","x","parseInt","y","replaceWith","setTimeout","left","top","currentWord","initializeCanvas","canvas","fabric","Canvas","isDrawingMode","getWidth","getHeight","Image","fromURL","img","set","clipTo","ctx","w","h","r","beginPath","moveTo","arcTo","closePath","add","sendToBack","Rect","fill","strokeWidth","stroke","rx","ry","opacity","windowIsLoaded","addDetailsToCanvas","load","show","repeat","str","chr","Array","join","tokens","nameOnCertificate","toUpperCase","split","lines","lineLimit","lineText","push","addUnderline","styles",0,"_tokens","_i","textDecoration","_text","IText","fontFamily","fontSize","centerH","Text","format","date","now","Line","id","document","getElementById","body","style","initialize","controls","progress","transition","backgroundTransition","margin","minScale","maxScale","history","center","addEventListener","previousSlide","popup","remove","clear","attr","selectric","iCheck","checkboxClass","value","val","toLowerCase","&","<",">","\"","'","/","schoolname","schoolnames","stopPropagation","name","target","has","debounce","keyword","schoolnamesArray","foundValues","pattern","RegExp","test","prop","end","parents","fields","serializeArray","isOnError","error","inArray","expires","droppable","accept","receiveHandler","noop","prev","getPointer","upperCanvasEl","srcElement","unknown","scroll","util","getScrollLeftTop","pointerX","pointerY","_getPointer","pageProp","clientProp","touchProp","type","clientX","clientY","isTouchSupported","prototype","e","ignoreZoom","cssScale","pointer","bounds","getBoundingClientRect","boundsWidth","boundsHeight","abs","bottom","right","calcOffset","_offset","transformPoint","invertTransform","viewportTransform","_renderCharDecoration","styleDeclaration","offset","charWidth","charHeight","indexOf","fillRect","_fontSizeFraction","_fontSizeMult","navigator","userAgent","appVersion","open","write","toDataURL","toBlob","blob","saveAs"],"mappings":"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","file":"application.js","sourcesContent":["// micro optimization\nvar $id = function(id) {\n  return $(document.getElementById(id));\n};\n\nvar currentWord = 0;\nvar windowIsLoaded = false;\nvar canvas = null;\nvar nameOnCertificate = '';\nvar players = {};\nvar transform = 'transform' in document.body.style\n  ? 'transform': 'webkitTransform' in document.body.style\n  ? 'webkitTransform': 'mozTransform' in document.body.style\n  ? 'mozTransform': 'oTransform' in document.body.style\n  ? 'oTransform': 'msTransform' in document.body.style\n  ? 'msTransform': null;\n\nReveal.initialize({\n  controls: true,\n  progress: true,\n  width: 1200,\n  height: 853,\n  transition: 'fade',\n  backgroundTransition: 'fade',\n  margin: 0.0,\n  minScale: 0.2,\n  maxScale: 2,\n  controls: true,\n  progress: true,\n  history: true,\n  center: true,\n  transition: 'convex'\n});\n\nfunction touch(enable) {\n  enable = (enable !== null) ? !!enable : true;\n\n  var config = Reveal.getConfig();\n  config.touch = enable;\n\n  Reveal.removeEventListeners();\n  Reveal.addEventListeners();\n}\n\nfunction getScale() {\n  var element = $('div.slides');\n  var zoom = parseFloat(element.css('zoom'));\n  var matches = element.css(transform).match(/matrix\\((-?\\d*\\.?\\d+),\\s*-?\\d*\\.?\\d+,\\s*-?\\d*\\.?\\d+,\\s*(-?\\d*\\.?\\d+),\\s*-?\\d*\\.?\\d+,\\s*-?\\d*\\.?\\d+\\)/);\n\n  if (isNaN(zoom) || matches !== null) {\n    zoom = [matches[1], matches[2]];\n  }\n\n  return zoom;\n}\n\nfunction scaleForms() {\n  var element = $('#intro-form, #pledge-name-form').removeClass('center');\n  var scale = getScale();\n\n  if ($.isArray(scale)) {\n    element.css(transform, 'translate(-50%, -50%) scaleX(' + scale[0] + ') scaleY(' + scale[1] + ')');\n  } else {\n    element\n      .css(transform, 'translate(-50%, -50%)')\n      .css('zoom', scale);\n  }\n}\n\nfunction onYouTubeIframeAPIReady() {\n  var currentSlide = $('div.slides > section.present');\n\n  $('div.slides > section').each(function(index, slide) {\n    if ($(slide).data('video-id')) {\n      var videoId = $(slide).data('video-id');\n      var div = $('<div id=\"video-' + videoId + '\">');\n      $('div.backgrounds > div:eq(' + index + ')').append(div);\n\n      players[videoId] = {\n        player: null,\n        isReady: false,\n        play: function() {\n          if (this.isReady) {\n            this.player.playVideo();\n          } else {\n            var _this = this;\n\n            var timer = setInterval(function() {\n              if (_this.isReady) {\n                _this.player.playVideo();\n                clearInterval(timer);\n              }\n            }, 500);\n          }\n        },\n        pause: function() {\n          if (this.isReady) {\n            this.player.pauseVideo();\n          }\n        }\n      };\n\n      players[videoId].player = new YT.Player('video-' + videoId, {\n        width: '100%',\n        height: '100%',\n        videoId: videoId,\n        playerVars: {\n          fs: 0,\n          origin: window.location.protocol + '//' + window.location.hostname\n        },\n        events: {\n          'onReady': function() {\n            players[videoId].isReady = true;\n            $id('video-' + videoId).addClass('video');\n          },\n          'onStateChange': function(event) {\n            if (event.data == YT.PlayerState.PLAYING) {\n              // don't use currentSlide\n              ga('send', 'event', 'Video', 'play', $('div.slides > section.present').find('h1').text());\n            }\n\n            if (event.data == YT.PlayerState.ENDED) {\n              Reveal.next();\n            }\n          }\n        }\n      });\n    }\n  });\n\n  if (currentSlide.data('video-id') && $.cookie('hide_intro_form') === '1') {\n    players[currentSlide.data('video-id')].play();\n  }\n}\n\n$('button.play-btn').on('click', function() {\n  Reveal.next();\n});\n\nif ($('div.slides > section.present').data('video-id')) {\n  $('.reveal > .backgrounds')\n    .addClass('dark')\n    .css('z-index', 2);\n}\n\nReveal.addEventListener('slidechanged', function(event) {\n  touch(true);\n\n  var currentSlide = $(event.currentSlide);\n  var previousSlide = $(event.previousSlide)\n\n  if (currentSlide.find('div.interactive-3').length < 1) {\n    $id('pledge-name-form').popup('hide');\n  }\n\n  if (previousSlide.data('video-id')) {\n    $('.reveal > .backgrounds')\n      .removeClass('dark')\n      .css('z-index', 0);\n\n    players[previousSlide.data('video-id')].pause();\n  }\n\n  if(currentSlide.data('video-id')) {\n    $('.reveal > .backgrounds')\n      .addClass('dark')\n      .css('z-index', 2);\n\n    if ($.cookie('hide_intro_form') === '1' || !$id('intro-form').is('.popup_content_visible')) {\n      players[currentSlide.data('video-id')].play();\n    }\n  }\n\n  if (currentSlide.find('div.interactive-1').length > 0 && (currentWord === 0 && currentSlide.find('div.skinny:not(.preload)').length < 1)) {\n    $('div.preload').remove();\n\n    touch(false);\n\n    showWord(currentWord);\n  }\n\n  if (currentSlide.find('div.interactive-4').length > 0 && nameOnCertificate !== '') {\n    touch(false);\n\n    initializeCanvas();\n  } else {\n    if (canvas !== null) {\n      canvas.clear();\n    }\n  }\n\n  ga('send', 'pageview', '/' + currentSlide.attr('id').replace(/#/, ''));\n});\n\n$id('show-second-block').on('click', function() {\n  $id('first-block').hide();\n  $id('second-block').show();\n});\n\nif ($.cookie('hide_intro_form') !== '1') {\n  $id('intro-form')\n    .show()\n    .popup('show');\n}\n\n$('select').selectric();\n$(':checkbox').iCheck({\n  checkboxClass: 'icheckbox_minimal-blue'\n});\n\n$id('schoolrole').on('change', function() {\n  var value = $(this).val();\n\n  if (value.toLowerCase() === 'other') {\n    $id('schoolroleother').show();\n  } else {\n    $id('schoolroleother').hide();\n  }\n});\n\nvar entityMap = {\n  \"&\": \"&amp;\",\n  \"<\": \"&lt;\",\n  \">\": \"&gt;\",\n  '\"': '&quot;',\n  \"'\": '&#39;',\n  \"/\": '&#x2F;'\n};\n\nfunction escapeHtml(string) {\n  return String(string).replace(/[&<>\"'\\/]/g, function (s) {\n    return entityMap[s];\n  });\n}\n\nvar schoolname = $id('schoolname');\nvar schoolnames = $id('schoolnames');\n\nschoolnames\n  .on('click', 'li', function(event) {\n    event.stopPropagation();\n\n    var name = $(this).text();\n\n    schoolname.val(name);\n\n    schoolnames\n      .removeClass('has-values')\n      .html('');\n  });\n\n$(document).on('click', function(event) {\n  if (!schoolname.is(event.target) || (!schoolnames.is(event.target) && schoolnames.has(event.target).length === 0)) {\n    schoolnames\n      .removeClass('has-values')\n      .html('');\n  }\n});\n\nfunction escapeRegExp(string){\n  return string.replace(/[.*+?^${}()|[\\]\\\\]/g, \"\\\\$&\");\n}\n\nschoolname\n  .on('input propertychange', $.debounce(function() {\n    var keyword = $(this).val();\n\n    var schoolnamesArray = window.schoolnamesArray || [];\n\n    schoolnames\n      .removeClass('has-values')\n      .html('');\n\n    if (keyword) {\n      keyword = escapeRegExp(keyword);\n\n      var foundValues = [];\n\n      for (var i = 0; i < schoolnamesArray.length; i++) {\n        var name = schoolnamesArray[i].replace(/(\\(|\\))/g, '');\n        var pattern = new RegExp('^' + keyword + '|\\\\s' + keyword + '.*', 'ig');\n\n        if (pattern.test(name)) {\n          foundValues.push(schoolnamesArray[i]);\n        }\n      }\n\n      if (foundValues.length > 0) {\n        schoolnames.addClass('has-values');\n\n        for (var i = 0; i < foundValues.length; i++) {\n          schoolnames.append('<li>' + escapeHtml(foundValues[i]) + '</li>');\n        };\n      }\n    }\n  }, 500));\n\n$id('agree')\n  .on('ifChecked', function() {\n    $id('submit-intro-form').prop('disabled', false);\n  })\n  .on('ifUnchecked', function() {\n    $id('submit-intro-form').prop('disabled', true);\n  });\n\n$id('second-block')\n  .find('input[type=text], input[type=number], input[type=email]')\n    .on('input propertychange', function() {\n      $(this).removeClass('error');\n    })\n  .end()\n  .find('select')\n    .on('change', function() {\n      $(this).parents('.selectric-wrapper').removeClass('error');\n    });\n\n$id('second-block')\n  .on('submit', function() {\n    $(this).find('input[type=text], input[type=number], input[type=email], .selectric-wrapper').removeClass('error');\n\n    var fields = $(this).serializeArray();\n    var isOnError = false;\n\n    for (var i = 0; i < fields.length; i++) {\n      var id = '';\n      var error = '';\n\n      if ($.inArray(fields[i].name, ['agree', 'schoolroleother']) !== -1) {\n        continue;\n      }\n\n      if (fields[i].value === '') {\n        error = 'Field is required.';\n      } else if (fields[i].name === 'email' && !/\\.edu\\.au$/i.test(fields[i].value)) {\n        error = 'Email address must contain \".edu.au\".';\n      } else if (fields[i].name === 'totalstudents' && parseInt(fields[i].value) === isNaN) {\n        error = 'Field expects a number.';\n      } else if (fields[i].name === 'schoolrole' && fields[i].value.toLowerCase() === 'other' && $id('schoolroleother').val() === '') {\n        id = 'schoolroleother';\n        error = 'Please specify your role.';\n      }\n\n      if (error) {\n        id = (id) ? id : fields[i].name;\n\n        if ($id(id).parents('.selectric-wrapper').length > 0) {\n          $id(id).parents('.selectric-wrapper').addClass('error');\n        } else {\n          $id(id).addClass('error');\n        }\n\n        isOnError = true;\n      }\n    };\n\n    if (!isOnError) {\n      /* $\n        .ajax({\n          type: 'POST',\n          url: '',\n          crossDomain: true,\n          data: $(this).serialize()\n        })\n        .done(function() {\n          $.cookie('hide_intro_form', '1', {expires: 0.5});\n          $id('intro-form').popup('hide');\n\n          ga('send', 'event', 'Form', 'submit', 'Initial form');\n        }); */\n      $.cookie('hide_intro_form', '1', {expires: 0.5});\n      $id('intro-form').popup('hide');\n\n      ga('send', 'event', 'Form', 'submit', 'Initial form');\n    }\n\n    return false;\n  });\n\n$(window).on('load resize orientationchange', function() {\n  scaleForms();\n});\n\nfunction shuffleArray(array) {\n  for (var i = array.length - 1; i > 0; i--) {\n    var j = Math.floor(Math.random() * (i + 1));\n    var temp = array[i];\n    array[i] = array[j];\n    array[j] = temp;\n  }\n\n  return array;\n}\n\nwindow.timelineWordsArray = shuffleArray(window.timelineWordsArray);\n\nfunction showWord(index) {\n  if (index < window.timelineWordsArray.length) {\n    var data = window.timelineWordsArray[index];\n    var words = data.words.replace(/\\n/g, '<br>');\n\n    var word = $('<div class=\"skinny words\" data-' + data.timeline + ' data-x=\"' + data.pos[0] + '\" data-y=\"' + data.pos[1] + '\" style=\"top: 15px;\"></div>')\n      .html(words);\n\n    $('div.interactive-1').append(word);\n\n    word\n      .css('left', ($('div.interactive-1').outerWidth() / 2) - (word.outerWidth() / 2))\n      .hide()\n      .fadeIn()\n      .on('mouseover', function() {\n        if (!$(this).is('.minimize')) {\n          $(this).addClass('mouseover');\n        }\n      })\n      .on('mousedown', function() {\n        if (!$(this).is('.minimize')) {\n          $(this).addClass('mousedown');\n        }\n      })\n      .on('mouseup', function() {\n        $(this).removeClass('mouseover mousedown');\n      });\n\n    if (transform) {\n      word.draggable();\n    } else {\n      word.draggable({\n        clone: function() {\n          return this.clone().addClass('clone');\n        }\n      });\n    }\n  }\n}\n\nfunction dragListener(time) {\n  var _time = time;\n\n  return function(event, ui) {\n    if (ui.item.is('[data-' + _time + ']')) {\n      $(this).addClass('drop-active');\n    }\n  };\n}\n\nfunction dropListener(time) {\n  var _time = time;\n\n  return function(event, ui) {\n    if (!ui.item.is('[data-' + _time + ']')) {\n      ga('send', 'event', 'Timeline', 'incorrect', ui.item.html().replace(/<br>/g, ''));\n      return;\n    }\n\n    ga('send', 'event', 'Timeline', 'correct', ui.item.html().replace(/<br>/g, ''));\n\n    var x = parseInt(ui.item.data('x'), 10);\n    var y = parseInt(ui.item.data('y'), 10);\n\n    if (transform) {\n      var clone = ui.item.clone();\n      ui.item.replaceWith(clone);\n\n      setTimeout(function() {\n        clone\n          .addClass('minimize')\n          .css({\n            left: 0,\n            top: 0\n          })\n          .css(transform, 'translate(' + x + 'px, ' + y + 'px)');\n      }, 251);\n    } else {\n      ui.item\n        .addClass('minimize')\n        .css({\n          left: x,\n          top: y\n        })\n        .draggable('disable');\n    }\n\n    showWord(++currentWord);\n\n    $(this).removeClass('drop-active');\n  };\n}\n\n$('div.before.dropzone')\n  .droppable({\n    accept: '.words',\n    receiveHandler: $.noop\n  })\n  .on('droppable:drop', dropListener('before'))\n  .on('droppable:over', dragListener('before'))\n  .on('droppable:out', function(event, ui) {\n    $(this).removeClass('drop-active');\n  });\n\n$('div.after.dropzone')\n  .droppable({\n    accept: '.words',\n    receiveHandler: $.noop\n  })\n  .on('droppable:drop', dropListener('after'))\n  .on('droppable:over', dragListener('after'))\n  .on('droppable:out', function(event, ui) {\n    $(this).removeClass('drop-active');\n  });\n\n$(window).load(function() {\n  windowIsLoaded = true;\n\n  if (!!(window.location + '').match(/page-11/)) {\n    $('div.preload').remove();\n\n    touch(false);\n\n    showWord(currentWord); // have to wait for the custom font to load\n  }\n});\n\n$('.box button').on('click', function() {\n  ga('send', 'event', 'Button', 'click', $(this).attr('name'));\n\n  $(this)\n    .next()\n      .show()\n    .end()\n    .remove();\n});\n\n$('div.interactive-3 li').on('click', function() {\n  $('div.interactive-3 li').removeClass('checked');\n  $(this).addClass('checked');\n\n  ga('send', 'event', 'Pledge', 'select', $(this).text());\n\n  $id('pledge-name-form').popup('show');\n});\n\n$id('enter-pledge-name').on('click', function() {\n  nameOnCertificate = $id('name-on-certificate').val();\n\n  if (nameOnCertificate) {\n    ga('send', 'event', 'Form', 'enter-pledge-name', nameOnCertificate);\n\n    Reveal.next();\n  }\n\n  return false;\n});\n\n$id('create-new-pledge').on('click', function() {\n  ga('send', 'event', 'Button', 'click', 'Create another pledge');\n\n  nameOnCertificate = '';\n\n  Reveal.prev();\n});\n\n(function() {\n  var unknown = 'unknown';\n\n  function getPointer(event, upperCanvasEl) {\n    event || (event = fabric.window.event);\n\n    var element = event.target ||\n                  (typeof event.srcElement !== unknown ? event.srcElement : null),\n\n        scroll = fabric.util.getScrollLeftTop(element, upperCanvasEl);\n\n    var scale = getScale();\n\n    var x = pointerX(event) + scroll.left;\n    var y = pointerY(event) + scroll.top;\n\n    if (!$.isArray(scale)) {\n      x = x / scale;\n      y = y / scale;\n    }\n\n    return {\n      x: x,\n      y: y\n    };\n  }\n\n  var pointerX = function(event) {\n    // looks like in IE (<9) clientX at certain point (apparently when mouseup fires on VML element)\n    // is represented as COM object, with all the consequences, like \"unknown\" type and error on [[Get]]\n    // need to investigate later\n    return (typeof event.clientX !== unknown ? event.clientX : 0);\n  },\n\n  pointerY = function(event) {\n    return (typeof event.clientY !== unknown ? event.clientY : 0);\n  };\n\n  function _getPointer(event, pageProp, clientProp) {\n    var touchProp = event.type === 'touchend' ? 'changedTouches' : 'touches';\n\n    return (event[touchProp] && event[touchProp][0]\n      ? (event[touchProp][0][pageProp] - (event[touchProp][0][pageProp] - event[touchProp][0][clientProp]))\n        || event[clientProp]\n      : event[clientProp]);\n  }\n\n  if (fabric.isTouchSupported) {\n    pointerX = function(event) {\n      return _getPointer(event, 'pageX', 'clientX');\n    };\n    pointerY = function(event) {\n      return _getPointer(event, 'pageY', 'clientY');\n    };\n  }\n\n  fabric.Canvas.prototype.getPointer = function (e, ignoreZoom, upperCanvasEl) {\n    if (!upperCanvasEl) {\n      upperCanvasEl = this.upperCanvasEl;\n    }\n    var pointer = getPointer(e, upperCanvasEl),\n        bounds = upperCanvasEl.getBoundingClientRect(),\n        boundsWidth = bounds.width || 0,\n        boundsHeight = bounds.height || 0,\n        cssScale;\n\n    if (!boundsWidth || !boundsHeight ) {\n      if ('top' in bounds && 'bottom' in bounds) {\n        boundsHeight = Math.abs( bounds.top - bounds.bottom );\n      }\n      if ('right' in bounds && 'left' in bounds) {\n        boundsWidth = Math.abs( bounds.right - bounds.left );\n      }\n    }\n\n    this.calcOffset();\n\n    pointer.x = pointer.x - this._offset.left;\n    pointer.y = pointer.y - this._offset.top;\n    if (!ignoreZoom) {\n      pointer = fabric.util.transformPoint(\n        pointer,\n        fabric.util.invertTransform(this.viewportTransform)\n      );\n    }\n\n    if (boundsWidth === 0 || boundsHeight === 0) {\n      // If bounds are not available (i.e. not visible), do not apply scale.\n      cssScale = { width: 1, height: 1 };\n    }\n    else {\n      cssScale = {\n        width: upperCanvasEl.width / boundsWidth,\n        height: upperCanvasEl.height / boundsHeight\n      };\n    }\n\n    return {\n      x: pointer.x * cssScale.width,\n      y: pointer.y * cssScale.height\n    };\n  };\n\n  fabric.IText.prototype._renderCharDecoration = function(ctx, styleDeclaration, left, top, offset, charWidth, charHeight) {\n    var textDecoration = styleDeclaration\n          ? (styleDeclaration.textDecoration || this.textDecoration)\n          : this.textDecoration;\n\n    if (!textDecoration) {\n      return;\n    }\n\n    if (textDecoration.indexOf('underline') > -1) {\n      ctx.fillRect(\n        left,\n        top + charHeight / 10,\n        charWidth,\n        1\n      );\n    }\n    if (textDecoration.indexOf('line-through') > -1) {\n      ctx.fillRect(\n        left,\n        top - charHeight * (this._fontSizeFraction + this._fontSizeMult - 1) + charHeight / 15,\n        charWidth,\n        charHeight / 15\n      );\n    }\n    if (textDecoration.indexOf('overline') > -1) {\n      ctx.fillRect(\n        left,\n        top - (this._fontSizeMult - this._fontSizeFraction) * charHeight,\n        charWidth,\n        charHeight / 15\n      );\n    }\n  };\n})();\n\nfunction initializeCanvas() {\n  if (canvas === null) {\n    canvas = new fabric.Canvas('certificate', {\n      isDrawingMode: true\n    });\n  }\n\n  var width = canvas.getWidth() - 5;\n  var height = canvas.getHeight() - 5;\n\n  fabric.Image.fromURL('images/page36/certificate-bg.png', function(img) {\n    img.set({\n      top: 0,\n      left: 0,\n      width: width,\n      height: height,\n      clipTo: function(ctx) {\n        var x = -((width / 2) - 1);\n        var y = -((height / 2) - 1);\n        var w = width;\n        var h = height;\n        var r = 40;\n\n        if (w < 2 * r) {\n          r = w / 2;\n        }\n\n        if (h < 2 * r) {\n          r = h / 2;\n        }\n\n        ctx.beginPath();\n        ctx.moveTo(x + r, y);\n        ctx.arcTo(x + w, y, x + w, y + h, r);\n        ctx.arcTo(x + w, y + h, x, y + h, r);\n        ctx.arcTo(x, y + h, x, y, r);\n        ctx.arcTo(x, y, x + w, y, r);\n        ctx.closePath();\n      }\n    });\n\n    canvas.add(img);\n\n    img.sendToBack();\n  });\n\n  canvas.add(new fabric.Rect({\n      top: 0,\n      left: 0,\n      width: width,\n      height: height,\n      fill: '',\n      strokeWidth: 5,\n      stroke: '#7DB2DB',\n      rx: 40,\n      ry: 40\n    }));\n\n    canvas.add(new fabric.Rect({\n      top: 5,\n      left: 5,\n      width: width - 5,\n      height: height - 5,\n      fill: '#FFF',\n      opacity: 0.4,\n      rx: 38,\n      ry: 38\n    }));\n\n  fabric.Image.fromURL('images/dove-logo2.png', function(img) {\n    img.set({\n      top: 50,\n      left: 50,\n      width: 181,\n      height: 123\n    });\n\n    canvas.add(img);\n  });\n\n  if (!windowIsLoaded) {\n    $(window).load(function() {\n      addDetailsToCanvas(canvas, width, height);\n    });\n  } else {\n    addDetailsToCanvas(canvas, width, height);\n  }\n\n  $id('download-pledge').show();\n  $id('create-new-pledge').show();\n}\n\nfunction repeat(str, chr){\n  chr = chr || 1;\n  return Array(chr).join(str);\n}\n\nfunction addDetailsToCanvas(canvas, width, height) {\n  var text = '';\n\n  if ($('div.interactive-3 li.checked').length < 1) {\n    text = $('div.interactive-3 li:eq(0)').text();\n  } else {\n    text = $('div.interactive-3 li.checked').text();\n  }\n\n  var tokens = ('\"' + nameOnCertificate + '\" ' + text.toUpperCase()).split(' ');\n  var lines = [];\n  var lineLimit = 40;\n  var lineText = '';\n\n  for (var i = 0; i < tokens.length; i++) {\n    if (lineText !== '') {\n      if ((lineText + ' ' + tokens[i]).length > lineLimit) {\n        lines.push(lineText);\n        lineText = tokens[i];\n      } else {\n        lineText += ' ' + tokens[i];\n      }\n    } else {\n      lineText = tokens[i];\n    }\n  }\n\n  lines.push(lineText);\n\n  var addUnderline = false;\n\n  for (var i = 0; i < lines.length; i++) {\n    var styles = {0: {}};\n\n    if (lines[i].match(/\"/)) {\n      var _tokens = lines[i].split('');\n\n      for (var _i = 0; _i < _tokens.length; _i++) {\n        if (_tokens[_i] === '\"') {\n          if (addUnderline === false) {\n            addUnderline = true;\n          } else if (addUnderline === true) {\n            addUnderline = false;\n          }\n        } else if (addUnderline) {\n          styles[0][_i] = {\n            textDecoration: 'underline'\n          };\n        }\n      }\n    }\n\n    var _text = new fabric.IText(lines[i], {\n      fontFamily: 'skinnycaps',\n      fontSize: 80,\n      left: 100,\n      top: 250 + (60 * i),\n      width: width - 120,\n      styles: styles\n    });\n\n    canvas.add(_text);\n\n    _text.centerH();\n  }\n\n  canvas.add(new fabric.Text('Signed ' + repeat(' ', 11) + ' Date ' + $.format.date($.now(), 'MMMM d, yyyy'), {\n    fontFamily: 'skinnycaps',\n    fontSize: 80,\n    top: height - 100,\n    left: 90\n  }));\n\n  canvas.add(new fabric.Line([10, height - 28, 270, height - 28], {\n    left: 230,\n    top: height - 27,\n    stroke: '#000',\n    strokeWidth: 2\n  }));\n\n  canvas.add(new fabric.Line([10, height - 28, 385, height - 28], {\n    left: 628,\n    top: height - 27,\n    stroke: '#000',\n    strokeWidth: 2\n  }));\n}\n\n$id('download-pledge').on('click', function() {\n  if (canvas !== null) {\n\n    if (/MSIE\\s/.test(navigator.userAgent) && parseFloat(navigator.appVersion.split('MSIE')[1]) < 10) {\n      window\n        .open()\n        .document.write('<img src=\"' + canvas.toDataURL() + '\">');\n    } else {\n      document\n        .getElementById('certificate')\n        .toBlob(function(blob) {\n          saveAs(blob, 'certificate.png');\n        });\n    }\n\n    ga('send', 'event', 'Button', 'click', 'Download this pledge');\n  }\n});\n\n\n"],"sourceRoot":"/source/"}