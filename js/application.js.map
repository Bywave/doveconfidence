{"version":3,"sources":["application.js"],"names":["escapeHtml","string","String","replace","s","entityMap","$id","id","$","document","getElementById","Reveal","initialize","controls","progress","width","height","transition","backgroundTransition","margin","minScale","maxScale","history","center","on","next","addEventListener","event","previousSlide","currentSlide","find","length","removeClass","addClass","ga","text","attr","hide","show","cookie","popup","selectric","iCheck","checkboxClass","value","this","val","toLowerCase","&","<",">","\"","'","/","schoolname","schoolnames","stopPropagation","name","html","is","target","has","debounce","keyword","get","done","response","i","append","prop","end","parents","fields","serializeArray","isOnError","error","inArray","test","parseInt","isNaN","expires"],"mappings":"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","file":"application.js","sourcesContent":["// micro optimization\nvar $id = function(id) {\n  return $(document.getElementById(id));\n};\n\nReveal.initialize({\n  controls: true,\n  progress: true,\n  width: 1200,\n  height: 853,\n  transition: 'fade',\n  backgroundTransition: 'fade',\n  margin: 0.0,\n  minScale: 0.2,\n  maxScale: 2,\n  controls: true,\n  progress: true,\n  history: true,\n  center: true,\n  transition: 'convex'\n});\n\n$('button.play-btn').on('click', function() {\n  Reveal.next();\n});\n\nReveal.addEventListener('slidechanged', function(event) {\n  var previousSlide = $(event.previousSlide);\n  var currentSlide = $(event.currentSlide);\n\n  if (previousSlide.find('iframe[data-autoplay]').length > 0) {\n    $('div.reveal').removeClass('dark');\n  }\n\n  if (currentSlide.find('iframe[data-autoplay]').length > 0) {\n    $('div.reveal').addClass('dark');\n\n    ga('send', 'event', 'Video', 'play', currentSlide.find('h1').text());\n  }\n\n  ga('send', 'pageview', '/' + currentSlide.attr('id').replace(/#/, ''));\n});\n\n$id('show-second-block').on('click', function() {\n  $id('first-block').hide();\n  $id('second-block').show();\n});\n\nif ($.cookie('show_intro_form') !== '1') {\n  $id('intro-form')\n    .show()\n    .popup('show');\n}\n\n$('select').selectric();\n$(':checkbox').iCheck({\n  checkboxClass: 'icheckbox_minimal-blue'\n});\n\n$id('schoolrole').on('change', function() {\n  var value = $(this).val();\n\n  if (value.toLowerCase() === 'other') {\n    $id('schoolroleother').show();\n  } else {\n    $id('schoolroleother').hide();\n  }\n});\n\nvar entityMap = {\n  \"&\": \"&amp;\",\n  \"<\": \"&lt;\",\n  \">\": \"&gt;\",\n  '\"': '&quot;',\n  \"'\": '&#39;',\n  \"/\": '&#x2F;'\n};\n\nfunction escapeHtml(string) {\n  return String(string).replace(/[&<>\"'\\/]/g, function (s) {\n    return entityMap[s];\n  });\n}\n\nvar schoolname = $id('schoolname');\nvar schoolnames = $id('schoolnames');\n\nschoolnames\n  .on('click', 'li', function(event) {\n    event.stopPropagation();\n\n    var name = $(this).text();\n\n    schoolname.val(name);\n\n    schoolnames\n      .removeClass('has-values')\n      .html('');\n  });\n\n$(document).on('click', function(event) {\n  if (!schoolname.is(event.target) || (!schoolnames.is(event.target) && schoolnames.has(event.target).length === 0)) {\n    schoolnames\n      .removeClass('has-values')\n      .html('');\n  }\n});\n\nschoolname\n  .on('input propertychange', $.debounce(function() {\n    var keyword = $(this).val();\n\n    schoolnames\n      .removeClass('has-values')\n      .html('');\n\n    if (keyword) {\n      $\n        .get('schools.php', {s: keyword})\n        .done(function(response) {\n          if (response.length > 0) {\n            schoolnames.addClass('has-values');\n\n            for (var i = 0; i < response.length; i++) {\n              schoolnames.append('<li>' + escapeHtml(response[i]) + '</li>');\n            };\n          }\n        });\n    }\n  }, 500));\n\n$id('agree')\n  .on('ifChecked', function() {\n    $id('submit-intro-form').prop('disabled', false);\n  })\n  .on('ifUnchecked', function() {\n    $id('submit-intro-form').prop('disabled', true);\n  });\n\n$id('second-block')\n  .find('input[type=text], input[type=number], input[type=email]')\n    .on('input propertychange', function() {\n      $(this).removeClass('error');\n    })\n  .end()\n  .find('select')\n    .on('change', function() {\n      $(this).parents('.selectric-wrapper').removeClass('error');\n    });\n\n$id('second-block')\n  .on('submit', function() {\n    $(this).find('input[type=text], input[type=number], input[type=email], .selectric-wrapper').removeClass('error');\n\n    var fields = $(this).serializeArray();\n    var isOnError = false;\n\n    for (var i = 0; i < fields.length; i++) {\n      var id = '';\n      var error = '';\n\n      if ($.inArray(fields[i].name, ['agree', 'schoolroleother']) !== -1) {\n        continue;\n      }\n\n      if (fields[i].value === '') {\n        error = 'Field is required.';\n      } else if (fields[i].name === 'email' && !/\\.edu\\.au$/i.test(fields[i].value)) {\n        error = 'Email address must contain \".edu.au\".';\n      } else if (fields[i].name === 'totalstudents' && parseInt(fields[i].value) === isNaN) {\n        error = 'Field expects a number.';\n      } else if (fields[i].name === 'schoolrole' && fields[i].value.toLowerCase() === 'other' && $id('schoolroleother').val() === '') {\n        id = 'schoolroleother';\n        error = 'Please specify your role.';\n      }\n\n      if (error) {\n        id = (id) ? id : fields[i].name;\n\n        if ($id(id).parents('.selectric-wrapper').length > 0) {\n          $id(id).parents('.selectric-wrapper').addClass('error');\n        } else {\n          $id(id).addClass('error');\n        }\n\n        isOnError = true;\n      }\n    };\n\n    if (!isOnError) {\n      /* $\n        .ajax({\n          type: 'POST',\n          url: '',\n          crossDomain: true,\n          data: $(this).serialize()\n        })\n        .done(function() {\n          $.cookie('show_intro_form', '1', {expires: 0.5});\n          $id('intro-form').popup('hide');\n\n          ga('send', 'event', 'Form', 'submit', 'Initial form');\n        }); */\n      $.cookie('show_intro_form', '1', {expires: 0.5});\n      $id('intro-form').popup('hide');\n\n      ga('send', 'event', 'Form', 'submit', 'Initial form');\n    }\n\n    return false;\n  });\n"],"sourceRoot":"/source/"}